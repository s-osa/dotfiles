---
description: 進行中の変更を Pull Request にする
---

# Pull Request 作成

進行中の変更を Pull Request にする。

## 入力

$ARGUMENTS

## 手順

1. **現状の確認**

   - `git status` で変更内容を確認
   - `git diff` で差分を確認
   - コミットされていない変更があればコミットする

2. **ブランチの確認**

   - 現在のブランチ名を確認
   - 通常は worktree で作業しているため、フィーチャーブランチ上にいるはず
   - **main/master ブランチ上にいる場合は警告して確認する**（意図的でなければ worktree の作成漏れの可能性がある）

3. **コミット（必要な場合）**

   - ステージングされていない変更をコミット
   - コミットメッセージは変更内容を簡潔に記述

4. **リモートへのプッシュ**

   - 現在のブランチをリモートにプッシュ

5. **関連 Issue の特定**

   以下の優先順で関連 Issue を推測する:

   1. 引数で Issue 番号/URL が渡されていればそれを使う
   2. ブランチ名から Issue 番号を推測（例: `feature/123-add-cache` → `#123`）
   3. 直近のコミットメッセージから Issue 参照を探す
   4. 上記で特定できない場合は実行者に確認する（なしで作成も可）

   Issue が特定できた場合:
   - 親 Issue があるかを確認し、あれば `Parent: #XXX` として記載する

6. **PR の作成**

   - タイトル: 変更内容を簡潔に記述
   - 本文の構成:
     - **関連 Issue の記載**（冒頭に記載）:

       **サブイシューで作業している場合:**
       ```
       Closes #456（または #456 のみ）
       Parent: #123
       ```
       - 1行目: サブイシューへの参照
       - 2行目: 親イシューへの参照

       **単独の Issue で作業している場合:**
       ```
       Closes #123（または #123 のみ）
       ```

       **`Closes` を付けるかどうかの判断:**
       - PR マージでそのまま完了 → `Closes #XXX`
       - 確認作業・デプロイなど追加作業がある → `#XXX` のみ（`Closes` を付けない）
       - Issue を閉じる ＝ 完了を意味する。追加作業があるなら閉じない

     - **概要**: この PR で何をしたか（箇条書き）
     - **テスト方法**: どうやって動作確認するか
   - ラベル: リポジトリに既存のラベルから適切なものがあれば付与する。**新しいラベルを作成しないこと**
   - base ブランチ: main（特に指定がなければ）

7. **結果の報告**
   - 作成した PR の URL を報告
